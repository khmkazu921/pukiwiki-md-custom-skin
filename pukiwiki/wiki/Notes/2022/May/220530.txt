#notemd
# Tech Forum

## Update Furuzono-san

  - OPS  
    operations
  - TSMC forum  
    Sensitive Information

<!-- end list -->

  - UCIe
  - D-chip :: tape-out
  - ZKD3 + ZSR1 + ZBC4

## OPS Report

  - FE  
    front-end

<!-- end list -->

  - JY, Vincent in MFG

  - Yuntao

  - PD0 :: RTL Generation

  - OSAT 2.5D :: silicon interposer
    
      - APLink

  - 3D :: stack
    
      - package embedded tech

# DE Meeting

  - ZKD3+ZBC1+ZSR1 (Etherium)
  - Ark NEC
  - Mentor Ansys :: 拡散・流体　thermal simulation of chip
  - CCD, D0, power cell size, 検証の仕方

# Self Study

## PT Lab3

  - level sensitive latch  
    When the enable input is a clock signal, the latch is said to be
    level-sensitive (to the level of the clock signal), as opposed to
    edge-sensitive like flip-flops.
    
    ``` tcl
    # 2
    report_timing -path summary -max_paths 5
    
    # List violating setup/hold timing paths
    report_constraint -all_violators -max_delay -min_delay
    
    # reg->reg in->reg reg->out in->out
    report_global_timing -delay min
    
    report_qor -only_violated
    
    # List the end point with the largest margin (the best slack).
    report_timing -path end -max 16 -slack_lesser 100 -to sd_DQ*
    
    # the data arrival time with fall transition at the end point
    report_timing -delay min_fall \
        -to I_ORCA_TOP/I_PCI_READ_FIFO/PCI_RFIFO_RAM/A1[1] \
        -from I_ORCA_TOP/I_PCI_READ_FIFO/count_int_reg[1]1/CP
    
    # single timing report for setup for each path group which has a
    # violation
    report_timing  -group [get_path_group *] -slack_lesser_than 0
    
    # the worst slack for setup to any output port
    report_timing -to [all_outputs -clock PCI_CLK]
    
    # identify the data pins of latches
    all_registers -level_sensitive -data_pins
    
    # hold to the D pin of the Latched_clk_en_reg latches.
    report_timing -delay min -to <pin name>
    
    # half clock cycle timing paths constrained by the clock SDRAM_CLK.
    report_timing -rise_from [get_clock SDRAM_CLK] -fall_to [get_clock SDRAM_CLK] \
        -delay min -max_paths 10 -slack_lesser 100
    ```

## Unit 4

  - ideal delays through mux and inverter are provided only with
    `set_clock_latency`
    
    ``` tcl
    # Primary clock
    create_clock -period 4 [get_ports Clk]
    # Generated clock
    create_generated_clock -divide_by 2 -name div_clk -source [get_ports Clk] FF3/Q
    
    # To see the calculated source latency
    report_clock -skew
    ```

  - Source synchronous interfaces :: refer to designs where the
    reference clock and data are sent from the transmitting device.

  - ideal clock :: PT will not calculate source latency for generated
    clocks if ideal

  - Virtual clocks :: without source
    
      - if a virtual clock is propagated, there is nothing to do for PT
        
        ``` tcl
        # Virtual Clock Generation
        create_clock -period 5 -name vclk
        set_input_delay -max 2 -clock vclk [get_ports in1]
        set_output_delay -max 1 -clock vclk [get_ports out2]
        
        # Show clock numbers
        sizeof_collection [all_clocks]
        sizeof_collection [get_generated_clocks *]
        
        # To report source latency detail for generated clocks
        report_timing -to sd_DQ[0] -path_type full_clock_expanded
        ```

  - Synchronous vs Asynchronous
    
    ``` tcl
    # Clkl and Clk2 are asynchronous
    set_false_path -from [get_clocks Clk1] -to [get_clocks C1k2]
    set_false_path -from [get_clocks C1k2] -to [get_clocks Clk1]
    
    # A preferred method, which is also portable to PrimeTime-SI
    set_clock_groups -asynchronous —group Cik1 -group C+k2
    ```

  - Logically Exclusive Clocks
    
    ``` tcl
    set_clock_groups -logicaly_exclusive -gourp CLK1 -group CLK2
    set_clock_groups -logicaly_exclusive -gourp CLK3 -group CLK4
    # or
    set_clock_groups -name logic_excl_grp -logicaly_exclusive \
        -group "CLK1 CLK3" -group "CLK2 CLK4"
    
    # To see 
    report_clock -group
    
    # test
    create_clock -name CLK1a -period 10 -wave_form [0.0 4.0]
    create_clock -name CLK1b -period 10 -wave_form [0.0 6.0] -add CLK1b
    set_clock_groups -physically_exclusive -group CLK1a -group CLK1b
    set_clock_groups -logicaly_exclusive -group "CLK1a CLK1b CLK3" \
        -group "CLK2 CLK4"
    
    # Asynchronous Clocks
    set_clock_group -name async_group -asynchronous \
        -group Clk -group Clk2
    
    # To see
    report_clock -attributes -groups
    
    # To check clock crossing
    check_timing -v -override clock_crossing
    lappend timing_ckeck_defaults clock_crossing
    check_timing -verbose
    
    # Generate timing report between clocks
    report_timing -from [get_clocks CLK1] -to [get_clocks CLK2]
    
    # message
    set_app_var timing_update_status_level high
    
    # To report for unconstrained paths
    set_app_var timing_report_unconstrained_paths true
    report_timing -from [get_clocks SYS_CLK] -to [get_clocks SDRAM_CLK]
    ```

  - Large base periods can alert you of potential clock definition
    problems

  - Searching unconstrained paths will take longer run-time than
    expected.

## Lab 4

``` tcl
  pt_shell> rpt_clock_ports
  Port Name      Direction      Clock Name     Is Generated   
  ------------------------------------------------------------
  pclk           in             PCI_CLK        false          
  sys_clk        in             SYS_CLK        false          
  sdr_clk        in             SDRAM_CLK      false          
  sd_CK          out            SD_DDR_CLK     true           
  sd_CKn         out            SD_DDR_CLKn    true  

  pt_shell> check_timing -over clock_crossing -verbose
  Information: Checking 'clock_crossing'.
  Information: There are 4 clocks having domains interacting. 
  *                       all paths are false paths
  #                       part of paths are false paths

  From Clock              Crossing Clocks
  ------------------------------------------------------------
  SYS_2x_CLK              SDRAM_CLK*, SYS_CLK
  SDRAM_CLK               SD_DDR_CLK#, SYS_CLK*
  PCI_CLK                 SYS_CLK*
  SYS_CLK                 PCI_CLK*, SDRAM_CLK*, SYS_2x_CLK

# TO identify the endpoint port which has the worst slack for
# out_setup
pt_shell> report_timing -path short -to [all_outputs]
report_timing -from [all_outputs] -path short
****************************************
Report : timing
        -path_type short
        -delay_type max
        -max_paths 1
        -sort_by slack
Design : ORCA
Version: O-2018.06
Date   : Mon May 30 17:18:57 2022
****************************************


  Startpoint: sd_DQ[0] (input port clocked by SDRAM_CLK)
  Endpoint: I_ORCA_TOP/I_SDRAM_IF/DQ_in_0_reg[0]
               (rising edge-triggered flip-flop clocked by SDRAM_CLK)
  Path Group: SDRAM_CLK
  Path Type: max
  Min Clock Paths Derating Factor : 0.9000

  Point                                                   Incr       Path
  ------------------------------------------------------------------------------
  clock SDRAM_CLK (fall edge)                           3.7500     3.7500
  clock network delay (propagated)                      0.0000     3.7500
  input external delay                                  0.8000     4.5500 r
  sd_DQ[0] (inout)                                      0.0000     4.5500 r
  ...
  I_ORCA_TOP/I_SDRAM_IF/DQ_in_0_reg[0]/D (sdnrb1)       2.9453 &   7.4953 r
  data arrival time                                                7.4953

  clock SDRAM_CLK (rise edge)                           7.5000     7.5000
  clock network delay (propagated)                      0.8304     8.3304
  clock reconvergence pessimism                         0.0000     8.3304
  I_ORCA_TOP/I_SDRAM_IF/DQ_in_0_reg[0]/CP (sdnrb1)                 8.3304 r
  library setup time                                   -0.1998     8.1307
  data required time                                               8.1307
  ------------------------------------------------------------------------------
  data required time                                               8.1307
  data arrival time                                               -7.4953
  ------------------------------------------------------------------------------
  slack (MET)                                                      0.6354

pt_shell> report_analysis_coverage -status violated -check out_setup
****************************************
Report : analysis_coverage
        -status_details {violated}
        -sort_by slack
        -check_type {out_setup}
Design : ORCA
Version: O-2018.06
Date   : Mon May 30 17:29:44 2022
****************************************

Type of Check         Total              Met         Violated         Untested
--------------------------------------------------------------------------------
out_setup                75        66 ( 88%)         9 ( 12%)         0 (  0%)
--------------------------------------------------------------------------------
All Checks               75        66 ( 88%)         9 ( 12%)         0 (  0%)


Constrained                  Related                     Check
Pin                          Pin            Clock        Type              Slack
--------------------------------------------------------------------------------
pad[1]                                      PCI_CLK      out_setup       -1.1574
pad[14]                                     PCI_CLK      out_setup       -0.8735
pad[13]                                     PCI_CLK      out_setup       -0.8735
pad[2]                                      PCI_CLK      out_setup       -0.2380
pad[0]                                      PCI_CLK      out_setup       -0.2380
pc_be[3]                                    PCI_CLK      out_setup       -0.2021
pc_be[2]                                    PCI_CLK      out_setup       -0.2021
pc_be[1]                                    PCI_CLK      out_setup       -0.0172
pc_be[0]                                    PCI_CLK      out_setup       -0.0172
1


pt_shell> report_timing -to sd_DQ[6] -path short

****************************************
Report : timing
        -path_type short
        -delay_type max
        -max_paths 1
        -sort_by slack
Design : ORCA
Version: O-2018.06
Date   : Mon May 30 17:33:04 2022
****************************************


  Startpoint: sdr_clk (clock source 'SDRAM_CLK')
  Endpoint: sd_DQ[6] (output port clocked by SD_DDR_CLK)
  Path Group: SD_DDR_CLK
  Path Type: max
  Min Clock Paths Derating Factor : 0.90

  Point                                    Incr       Path
  ---------------------------------------------------------------
  clock SDRAM_CLK (fall edge)              3.75       3.75
  clock source latency                     0.00       3.75
  sdr_clk (in)                             0.00       3.75 f
  ...
  sd_DQ[6] (inout)                         4.40       8.15 f
  data arrival time                                   8.15

  clock SD_DDR_CLK (rise edge)             7.50       7.50
  clock reconvergence pessimism            0.00       7.50
  output external delay                   -0.75       6.75
  data required time                                  6.75
  ---------------------------------------------------------------
  data required time                                  6.75
  data arrival time                                  -8.15
  ---------------------------------------------------------------
  slack (VIOLATED)                                   -1.40
```

  - `lappend timing_check_defaults ideal_clocks`
  - `set timing_all_propagated true`

<!-- end list -->

  - **I did not use orca_savesessionviolation**
